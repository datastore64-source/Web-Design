<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Cache Fallback with Try-Catch</title>
    <style>
        body {
            font-family: Arial;
            padding: 20px;
        }

        #output {
            white-space: pre-wrap;
        }

        button {
            padding: 10px;
            margin-top: 10px;
        }
    </style>
</head>

<body>

    <h2>üì¶ User Info (Try API ‚Üí Fallback to Cache)</h2>
    <button onclick="loadUser()">Load User</button>
    <div id="output">Click "Load User" to begin...</div>

    <script>
        async function loadUser() {
            const output = document.getElementById("output");
            output.textContent = "‚è≥ Trying to fetch user from API...";

            try {
                const response = await fetch("https://jsonplaceholder.typicode.com/users/1");

                if (!response.ok) {
                    throw new Error(`Server error: ${response.status}`);
                }

                const user = await response.json();

                // Save to cache
                localStorage.setItem("cachedUser", JSON.stringify(user));

                output.textContent = `‚úÖ Fetched from API:\nName: ${user.name}\nEmail: ${user.email}`;
            } catch (error) {
                // Error occurred ‚Üí Try cache
                const cached = localStorage.getItem("cachedUser");

                if (cached) {
                    const user = JSON.parse(cached);
                    output.textContent = `‚ö†Ô∏è API failed. Loaded from cache:\nName: ${user.name}\nEmail: ${user.email}`;
                } else {
                    output.textContent = `‚ùå Error: ${error.message}\nü™´ No cached data available.`;
                }
            }
        }
    </script>
    <!-- 
    üß† Key Concepts Demonstrated:
Concept	What it does
try {}	Attempt API call
catch (error) {}	Fallback logic on error
localStorage.setItem()	Save backup data
localStorage.getItem()	Load backup if needed

üß™ How to Test:
Run with internet ‚Üí Data comes from API.

Go offline or use wrong URL ‚Üí App uses cache fallback.

Clear localStorage and go offline ‚Üí Shows proper error message. -->

</body>

</html>